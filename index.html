<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>GIPHY</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
                crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
                crossorigin="anonymous">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
                crossorigin="anonymous"></script>
        <link rel="stylesheet" href="style.css">
</head>

<body>

        <!-- <div class="jumbotron jumbotron-fluid">
                                <div class="container">
                                  <h1 class="display-4">Fluid jumbotron</h1>
                                  <p class="lead">This is a modified jumbotron that occupies the entire horizontal space of its parent.</p>
                                </div>
                              </div> -->
        <div>
                <input type="search" id="mySearch" name="search">
                <button class="topic" data-search="searchButton">Add Topic</button>
        </div>

        <div class="imgButtons">
                <button class="topic" data-search="Mickey Mouse">Mickey Mouse</button>
                <button class="topic" data-search="Taz">Taz</button>
                <button class="topic" data-search="Frozen">Frozen</button>
                <button class="topic" data-search="Shrek">Shrek</button>
                <button class="topic" data-search="Lion King">Lion King</button>
                <button class="topic" data-search="Monsters Inc">Monsters Inc</button>
                <button class="topic" data-search="Wreck It Ralph">Wreck It Ralph</button>
        </div>

        <div class="imgArea row">

        </div>

        <div class="addMoreArea"></div>

        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
                crossorigin="anonymous"></script>
        <script type="text/javascript">

                var offSetVal = 0;
                var searchTerm = "";

                $(".topic").on("click", function () {

                        searchTerm = $(this).data("search");
                        if (searchTerm === "searchButton") {
                                searchTerm = $("#mySearch").val().trim();
                             
                                $(".imgButtons").append('<button data-search="' + searchTerm + '">' +
                                        searchTerm + '</button>')
                        }
                        
                        offSetVal = 0;
                        $(".imgArea").html("<p></p>")
                        displayImg();
                        $(".addMoreArea").html('<p><button class="addButton row">Add 10 more</button></p>');
                        $(".addButton").on("click", function () {
                        offSetVal = offSetVal + 10;
                        displayImg();
                        });
                });
             
                function displayImg(){

                
                        var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + searchTerm +
                                "&api_key=P4zd4DpT3G8sVMwDCrmBEMrl1EjVGHk3&limit=10&offset=" +
                                offSetVal;

                        $.ajax({
                                        url: queryURL,
                                        method: "GET"
                                })

                                .done(function (response) {
                                        console.log(response.data);

                                        for (var i = 0; i < response.data.length; i++) {


                                                var div = $('<div class="imgDiv col-md-4">');
                                                var img = $('<img class = "imgSize">');
                                                var rating = $("<p>Rating: </p>");
                                                var ratingValue = response.data[i].rating;

                                                img.attr("data-animate", response.data[i].images
                                                        .downsized.url);
                                                img.attr("data-still", response.data[i].images.downsized_still
                                                        .url);
                                                img.attr("data-state", "still")
                                                img.attr("src", response.data[i].images.downsized_still
                                                        .url);

                                                $('.imgArea').append(div);
                                                div.append(img);
                                                div.append(rating);
                                                rating.append(ratingValue);

                                        }
                                })

                };

                $(document).on("click", 'img', function () {
                        var state = $(this).attr("data-state");
                        var animatedURL = $(this).attr("data-animate");
                        var stillURL = $(this).attr("data-still");
                        if (state === "still") {
                                $(this).attr("src", animatedURL);
                                $(this).attr("data-state", "animated");
                        } else {
                                $(this).attr("src", stillURL);
                                $(this).attr("data-state", "still");
                        }
                })
        </script>
</body>

</html>